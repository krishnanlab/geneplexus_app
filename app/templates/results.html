<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/buttons/1.6.4/css/buttons.bootstrap4.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.2.6/css/responsive.dataTables.min.css">
    <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='main.css') }}">
    <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='graph.css') }}">
    <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='d3-tip.css') }}">
    <title>GenePlexus</title>
    <script>
        var dataset = {{ graph | safe }}
        console.log(dataset)
    </script>
</head>
    <body>
       <header>
          <div class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
            <a class="navbar-brand" href="#">Krishnan Lab GenePlexus</a>
            <div class="collapse navbar-collapse" id="navbarCollapse">
                <ul class="navbar-nav mr-auto">
                    <li class="navbar-item active">
                        <a class="nav-link" href="{{ url_for('index') }}">Home</a>
                    </li>
                    <li class="navbar-item active">
                        <a class="nav-link"  href="{{ url_for('about') }}">About</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> Jobs </a>
                            <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                <li><a class="dropdown-item" href="#">job #1</a></li>
                                <li><a class="dropdown-item" href="#">job #2</a></li>
                            </ul>
                    </li>
                </ul>
            </div>
          </div>
        </header>
        <div class="container">
            <div class="border border-dark">
                <div class="box_padding">
                    <div class="row">
                        <div class="col-2 d-flex">
                            <a class="btn btn-secondary border dark" href="{{ url_for('index') }}" role="button">Re-run Analysis</a>
                        </div>
                        <div class="col-4">
                            <b>Model Generation took: {{( tic1 )}} seconds</b><br>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-2 text-left col-sm-2">
                            <b>Parameters:</b>
                        </div>
                        <div class="col-xs-3 text-left col-sm-3">
                            <label>Job Name:&nbsp</label>{{( request.form['job'] )}}<br>
                            <label>Network:&nbsp</label>{{( request.form['network'] )}}<br>
                        </div>
                        <div class="col-xs-3 text-left col-sm-3">
                            <label>Features:&nbsp</label>{{( request.form['features'] )}}<br>
                            <label>Negative Class:&nbsp</label>{{( request.form['negativeclass'] )}}<br>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-2 col-sm-2"></div>
                        <div class="col-xs-6 col-sm-6">
                            <label>Cross Validation:&nbsp</label>{{( avgps )}}<br>
                        </div>
                    </div>
                </div>
            </div>
            <div role="tabpanel">

                <!-- Nav tabs -->
                <ul class="nav nav-tabs" role="tablist">
                    <li class="nav-item">
                        <a href="#predictions" class="nav-link text-dark active" data-toggle="tab">Gene Predictions</a>
                    </li>
                    <li class="nav-item">
                        <a href="#sim_go" class="nav-link text-dark" data-toggle="tab">Similarities to GO Biological Processes</a>
                    </li>
                    <li class="nav-item">
                        <a href="#sim_dis" class="nav-link text-dark" data-toggle="tab">Similarities to Disease</a>
                    </li>
                    <li class="nav-item">
                        <a href="#netgraph" class="nav-link text-dark" data-toggle="tab">Network graph</a>
                    </li>
                    <li class="nav-item">
                        <a href="#validation" class="nav-link text-dark" data-toggle="tab">Validation Data</a>
                    </li>
                </ul>

                  <!-- Tab panes -->
                <div class="tab-content">
                    <div role="tabpanel" class="tab-pane fade show active" id="predictions">
                        {{ probs_table|safe }}
                    </div>

                    <div class="tab-pane fade" id="sim_go">
                        {{ go_table|safe }}
                    </div>

                    <div class="tab-pane fade" id="sim_dis">
                        {{ dis_table|safe }}
                    </div>
                    <div class="tab-pane fade" id="netgraph">

                        <svg width="1080" height="600" id="graph"></svg>
                        <canvas hidden width="1080" height="600" id="canvas"></canvas>
                    </div>
                    <div class="tab-pane fade" id="validation">
                        <div class="table_container">
                            <div class="border border-dark">
                                <div class="box_padding">
                                    <b>File Summary</b><br>
                                    <div class="row">
                                        <div class="col-xs-6 text-left col-sm-6">
                                            {{( table_info[0] )}}<br>
                                            {{( table_info[1] )}}
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-6 text-left col-sm-6">
                                            {{( table_info[2] )}}<br>
                                            {{( table_info[3] )}}<br>
                                            {{( table_info[4] )}}<br>
                                        </div>
                                        <div class="col-xs-6 text-left col-sm-6">
                                            {{( table_info[5] )}}<br>
                                            {{( table_info[6] )}}<br>
                                            {{( table_info[7] )}}<br>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {{ validate_table|safe }}
                            </div>
                        </div>
                    </div>
                <div class="fill_container">
                    <div id="divLoading">
                        <div id="loading"><img src="{{ url_for('static', filename='loader.gif') }}"></div>
                    </div>
                </div>
            </div>
        </div>
        <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
        <script src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>
        <script src="https://cdn.datatables.net/1.10.22/js/dataTables.bootstrap.min.js"></script>
        <script src="https://cdn.datatables.net/responsive/2.2.6/js/dataTables.responsive.min.js"></script>
        <script src="https://cdn.datatables.net/responsive/2.2.6/js/responsive.bootstrap.min.js"></script>
        <!--<script src="https://cdn.datatables.net/v/dt/dt-1.10.22/datatables.min.js"></script>-->
        <script src="https://cdn.datatables.net/buttons/1.6.4/js/dataTables.buttons.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/1.6.4/js/buttons.bootstrap4.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
        <script src="https://cdn.datatables.net/buttons/1.6.4/js/buttons.html5.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/1.6.4/js/buttons.print.min.js"></script>
        <script src="https://d3js.org/d3.v4.min.js"></script>
        <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
        <script src="{{url_for('static', filename='d3-v4-contextmenu.js')}}"></script>
        <script src="{{url_for('static', filename='d3-tip.js')}}"></script>
        <script src="{{url_for('static', filename='graph.js')}}"></script>
        <script src="{{url_for('static', filename='datatable.js')}}"></script>
    </body>
</html>