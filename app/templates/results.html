<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/buttons/1.6.4/css/buttons.bootstrap4.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.2.6/css/responsive.dataTables.min.css">
    <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='main.css') }}">
    <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='graph.css') }}">
    <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='d3-tip.css') }}">
    <title>GenePlexus</title>
    <script>
        var dataset = {{ graph | safe }}
    </script>
</head>
    <body>
       <header>
          <div class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
            <a class="navbar-brand" href="#">GenePlexus</a>
            <div class="collapse navbar-collapse" id="navbarCollapse">
                <ul class="navbar-nav mr-auto">
                    <li class="navbar-item active">
                        <a class="nav-link" href="{{ url_for('index') }}">Home</a>
                    </li>
                    <li class="navbar-item active">
                        <a class="nav-link"  href="{{ url_for('help') }}">Help</a>
                    </li>
                    <li class="navbar-item active">
                        <a class="nav-link"  href="{{ url_for('about') }}">About</a>
                    </li>
                    <li class="navbar-item active">
                        <a class="nav-link"  href="{{ url_for('jobs') }}">Jobs</a>
                    </li>
                </ul>
                <ul class="navbar-nav mr-auto">
                    <li class="navbar-item active">
                        <a class="nav-link"  href="https://www.thekrishnanlab.org/" target="_blank">Krishnan Lab</a>
                    </li>
                </ul>
            </div>
          </div>
        </header>
       <div class="result_container">
            <div class="border border-dark">
                <div class="box_padding">
                    <div class="row">
                        <div class="col-xs-2 text-left col-sm-2">
                            <b>Parameters:</b>
                        </div>
                        <div class="col-xs-3 text-left col-sm-3">
                            <label>Job Name:&nbsp</label>{{( jobname )}}<br>
                            <label>Network:&nbsp</label>{{( request.form['network'] )}}<br>
                        </div>
                        <div class="col-xs-3 text-left col-sm-3">
                            <label>Features:&nbsp</label>{{( request.form['features'] )}}<br>
                            <label>Negative Class:&nbsp</label>{{( request.form['negativeclass'] )}}<br>
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-xs-12 col-sm-12">
                            <label>The median value of the log2(auPRC/prior)
                                for 5-fold cross validation is &nbsp</label>{{( avgps )}}<br>&nbsp
                                </label>&nbsp;<a href="#" data-toggle="popover" data-trigger="hover" data-placement="right"
                                  data-content="log2(auPRC/prior) reports the 2-fold change of the auPRC over the expected result.
                                  For example a value of 1 is a model that performs twice as good as the expected result.">
                           <i class="fas fa-question-circle"></i></a>
                        </div>
                    </div>
                </div>
            </div>
            <div role="tabpanel">
                <!-- Nav tabs -->
                <ul class="nav nav-tabs" role="tablist">
                    <li class="nav-item">
                        <a href="#predictions" class="nav-link text-dark active" data-toggle="tab">Gene Predictions</a>
                    </li>
                    <li class="nav-item">
                        <a href="#sim_go" class="nav-link text-dark" data-toggle="tab">Similarities to GO Biological Processes</a>
                    </li>
                    <li class="nav-item">
                        <a href="#sim_dis" class="nav-link text-dark" data-toggle="tab">Similarities to Disease</a>
                    </li>
                    <li class="nav-item">
                        <a href="#netgraph" class="nav-link text-dark" data-toggle="tab">Network graph</a>
                    </li>
                    <li class="nav-item">
                        <a href="#validation" class="nav-link text-dark" data-toggle="tab">Validation Data</a>
                    </li>
                </ul>

                  <!-- Tab panes -->
                <div class="tab-content">
                    <div role="tabpanel" class="tab-pane fade show active" id="predictions">
                        <div class="table_container">
                            <div class="box_padding">
                                <p>The table below contains the prediction probability for all the genes in the selected network
                                    based on whether that belong in the class determined by the input gene list.
                                    The probabilities are bounded between 0 and 1. The Class-labels are; P - gene was
                                    considered in positive class while training, N- gene was considered in negative class
                                    while training and U - gene was not considered at all during training.</p>
                            </div>
                        {{ probs_table|safe }}
                        </div>
                    </div>

                    <div class="tab-pane fade" id="sim_go">
                        <div class="table_container">
                            <div class="box_padding">
                                <P>The model weights of the model trained on the input gene file are compared to model weights
                                    from models trained on lists of genes associated with GO Biological Process.
                                    The similarity to these other models is reported as a z-score that takes into account the
                                    background of similarities between all models.</P>
                            </div>
                        {{ go_table|safe }}
                        </div>
                    </div>

                    <div class="tab-pane fade" id="sim_dis">
                        <div class="table_container">
                            <div class="box_padding">
                                <P>The model weights of the model trained on the input gene file are compared to model weights
                                    from models trained on lists of genes associated with DisGeNet terms.
                                    The similarity to these other models is reported as a z-score that takes into account the
                                    background of similarities between all models.</P>
                            </div>
                        {{ dis_table|safe }}
                        </div>
                    </div>
                    <div class="tab-pane fade" id="netgraph">
                        <div class="controls">
                            <div class="force">
                                <p><label>Adjust number of nodes shown based on highest prediction</label></p>
                              </div>
                            <div class="force">
                                <p><label>Sets link length</label></p>

                              </div>
                        </div>
                        <svg width="1080" height="600" id="graph"></svg>
                        <canvas hidden width="1080" height="600" id="canvas"></canvas>
                    </div>
                    <div class="tab-pane fade" id="validation">
                        <div class="table_container">
                            <div class="box_padding">
                                <p>The number of genes in the input file was {{ input_count }}.
                                The number of those genes that were uniquely mapped to an Entrez ID
                                        and were also in the network is {{positive_genes}}.</p>
                            </div>
                        {{ validate_table|safe }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
        <script src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>
        <script src="https://cdn.datatables.net/1.10.22/js/dataTables.bootstrap.min.js"></script>
        <script src="https://cdn.datatables.net/responsive/2.2.6/js/dataTables.responsive.min.js"></script>
        <script src="https://cdn.datatables.net/responsive/2.2.6/js/responsive.bootstrap.min.js"></script>
        <!--<script src="https://cdn.datatables.net/v/dt/dt-1.10.22/datatables.min.js"></script>-->
        <script src="https://cdn.datatables.net/buttons/1.6.4/js/dataTables.buttons.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/1.6.4/js/buttons.bootstrap4.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
        <script src="https://cdn.datatables.net/buttons/1.6.4/js/buttons.html5.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/1.6.4/js/buttons.print.min.js"></script>
        <script src="https://d3js.org/d3.v4.min.js"></script>
        <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
        <script src="{{url_for('static', filename='d3-v4-contextmenu.js')}}"></script>
        <script src="{{url_for('static', filename='d3-tip.js')}}"></script>
        <script src="{{url_for('static', filename='graph.js')}}"></script>
        <script src="{{url_for('static', filename='datatable.js')}}"></script>
    </body>
</html>